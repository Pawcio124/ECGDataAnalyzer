(this.webpackJsonpekgdataselector=this.webpackJsonpekgdataselector||[]).push([[0],{131:function(e,t){},133:function(e,t){},153:function(e,t,n){"use strict";n.r(t);var a=n(10),c=n.n(a),i=n(16),o=n(206),r=n(155),s=n(185),l=n(182),d=n(186),u=n(2),j=Object(l.a)({textStyle:{color:"white",userSelect:"none"},welcomeTextStyle:{color:"white",fontSize:130,fontFamily:"Indie Flower",userSelect:"none"},buttonStyle:{color:"white",fontSize:120},welcomeBoxStyle:{position:"absolute",width:"auto",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},textBoxStyle:{display:"flex",height:"100%",justifyContent:"center",padding:"85px"}}),b=function(){var e=j(),t=Object(i.f)();return Object(u.jsx)(o.a,{className:e.welcomeBoxStyle,children:Object(u.jsx)(o.a,{className:e.textBoxStyle,children:Object(u.jsxs)(o.a,{whiteSpace:"nowrap",textAlign:"center",children:[Object(u.jsx)(r.a,{className:e.textStyle,variant:"h2",children:"Welcome!"}),Object(u.jsx)(r.a,{className:e.welcomeTextStyle,children:"ECG Data Analyzer"}),Object(u.jsx)(s.a,{onClick:function(){t.push("/ECGDataAnalyzer")},children:Object(u.jsx)(d.a,{className:e.buttonStyle})})]})})})},g=n(13),x=n(194),h=n(195),f=n(193),O=n(209),p=n(156),S=n(208),y=n(188),k=n(190),m=n(0),v=n.n(m),D=n(62),I=n(19),R=n(67),T=function(e,t,n){switch(t){case"P":e.P=e.P+n;break;case"Q":e.Q=e.Q+n;break;case"R":e.R=e.R+n;break;case"S":e.S=e.S+n;break;case"T":e.T=e.T+n}},C=Object(R.b)({name:"ekgData",initialState:{navigateByR:!1,ekg:[],signQuantity:{P:0,Q:0,R:0,S:0,T:0},loaded:!1,ekgDataInfo:{calculateSignsPTDone:!1,calculateSignsQSDone:!1,PIndex:[],QIndex:[],RIndex:[],SIndex:[],TIndex:[]}},reducers:{setNavigateByR:function(e){e.navigateByR=!e.navigateByR},saveEkgData:function(e,t){t.payload.forEach((function(t,n){var a,c=t.data;c[2]&&(T(e.signQuantity,c[2],1),"R"===c[2]&&e.ekgDataInfo.RIndex.push(n)),e.ekg.push([c[0],c[1],null!==(a=c[2])&&void 0!==a?a:""])})),e.loaded=!0},clearEkgData:function(e){e.navigateByR=!1,e.ekg=[],e.signQuantity={P:0,Q:0,R:0,S:0,T:0},e.loaded=!1,e.ekgDataInfo={calculateSignsPTDone:!1,calculateSignsQSDone:!1,PIndex:[],QIndex:[],RIndex:[],SIndex:[],TIndex:[]}},calculateSignsQS:function(e){for(var t=!1,n=!1,a=0;a<e.ekgDataInfo.RIndex.length;a++){for(var c=e.ekgDataInfo.RIndex[a]+1;c<e.ekgDataInfo.RIndex[a+1];c++)if(parseInt(e.ekg[c][1])<parseInt(e.ekg[c+1][1])&&!t&&(t=!0,T(e.signQuantity,"S",1),e.ekgDataInfo.SIndex.push(c),e.ekg.splice(c,1,[e.ekg[c][0],e.ekg[c][1],"S"])),parseInt(e.ekg[c][1])<parseInt(e.ekg[c+1][1])&&e.ekgDataInfo.RIndex[a+1]-c<=5&&t&&!n){n=!0,T(e.signQuantity,"Q",1),e.ekgDataInfo.QIndex.push(c),e.ekg.splice(c,1,[e.ekg[c][0],e.ekg[c][1],"Q"]);break}t=!1,n=!1}e.ekgDataInfo.calculateSignsQSDone=!0},calculateSignsPT:function(e){for(var t=0;t<e.ekgDataInfo.QIndex.length;t++){for(var n=e.ekgDataInfo.QIndex[t],a=[],c=20;c>0;c--)a.push(parseInt(e.ekg[n-c][1]));var i=a.indexOf(Math.max.apply(Math,a));if(-1!==i){var o=n-(a.length-i);T(e.signQuantity,"P",1),e.ekgDataInfo.PIndex.push(o),e.ekg.splice(o,1,[e.ekg[o][0],e.ekg[o][1],"P"])}}for(var r=0;r<e.ekgDataInfo.SIndex.length;r++){for(var s=e.ekgDataInfo.SIndex[r],l=[],d=6;d<40;d++)l.push(parseInt(e.ekg[s+d][1]));var u=l.indexOf(Math.max.apply(Math,l));if(-1!==u){var j=s+u+6;T(e.signQuantity,"T",1),e.ekgDataInfo.TIndex.push(j),e.ekg.splice(j,1,[e.ekg[j][0],e.ekg[j][1],"T"])}}e.ekgDataInfo.calculateSignsPTDone=!0},addSign:function(e,t){var n=t.payload,a=n.index,c=n.sign,i=n.oldSign;T(e.signQuantity,c,1),T(e.signQuantity,i,-1),e.ekg.splice(a,1,[e.ekg[a][0],e.ekg[a][1],null!==c&&void 0!==c?c:""])}}}),w=C.actions,P=w.setNavigateByR,N=w.saveEkgData,B=w.clearEkgData,Q=w.addSign,F=w.calculateSignsQS,E=w.calculateSignsPT,M=C.reducer,z=n(31),A=Object(l.a)({positiveButton:{background:"#4caf50","&:hover":{background:"#388e3c"}},actionButtonStyle:{borderRadius:40,width:"150px",height:"50px",marginLeft:"50px",marginRight:"50px"},fileNameStyle:{height:20}}),L=function(e){var t=A(),n=Object(z.useToasts)().addToast,a=Object(m.useRef)(e.childRef),c=Object(I.b)(),i=function(e){a.current&&a.current.open(e)},s=function(){a.current&&(a.current.removeFile(),c(B()),n("File Removed.",{appearance:"error",autoDismiss:!0}))};return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(D.b,{ref:a,onFileLoad:function(e){c(B()),c(N(e)),n("File Loaded Successfully.",{appearance:"success",autoDismiss:!0})},onError:function(e){n(e.message,{appearance:"error",autoDismiss:!0})},noClick:!0,noDrag:!0,noProgressBar:!0,children:function(e){var n=e.file;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(r.a,{className:t.fileNameStyle,variant:"h4",children:n&&n.name}),Object(u.jsxs)(o.a,{paddingTop:10,children:[Object(u.jsx)(p.a,{className:"".concat(t.actionButtonStyle," ").concat(t.positiveButton),variant:"contained",color:"primary",onClick:i,children:"Browse file"}),Object(u.jsx)(p.a,{disabled:!n,variant:"contained",color:"secondary",onClick:s,className:t.actionButtonStyle,children:"Remove"})]})]})}})})},W=I.c,q=n(189),G=n(191),V=n(205),H=Object(l.a)({downloadLinkStyle:{color:"black",textDecoration:"none"},disabledDownloadLinkStyle:{color:"rgba(0, 0, 0, 0.26)",textDecoration:"none"},closeIconStyle:{position:"absolute",right:0,top:0},disableButton:{marginTop:20,borderRadius:40},positiveButton:{background:"#4caf50","&:hover":{background:"#388e3c"}},actionButtonStyle:{marginTop:20,borderRadius:40}}),J=function(e){var t=W((function(e){return e.ekgData.ekg})),n=Object(m.useState)(""),a=Object(g.a)(n,2),c=a[0],i=a[1],o=Object(m.useState)(!1),l=Object(g.a)(o,2),d=l[0],j=l[1],b=H();return Object(u.jsxs)(S.a,{PaperProps:{style:{padding:18,border:"solid 2px grey",borderRadius:40,textAlign:"center"}},onClose:function(){e.setCSVFileModalOpen(!1),i(""),j(!1)},open:e.CSVFileModalOpen,children:[Object(u.jsxs)(y.a,{disableTypography:!0,children:[Object(u.jsx)(s.a,{onClick:function(){e.setCSVFileModalOpen(!1),i(""),j(!1)},className:b.closeIconStyle,children:Object(u.jsx)(q.a,{})}),Object(u.jsx)(r.a,{variant:"h3",children:"Save data to new file"})]}),Object(u.jsx)(k.a,{children:Object(u.jsxs)(G.a,{container:!0,spacing:1,children:[Object(u.jsx)(G.a,{item:!0,xs:12,children:Object(u.jsx)(V.a,{error:!c.length&&d,onClick:function(){return j(!0)},fullWidth:!0,value:c,onChange:function(e){return i(e.target.value)},variant:"outlined",placeholder:"Set file name",helperText:!c.length&&d?"Required":null})}),Object(u.jsx)(f.a,{color:"primary",fullWidth:!0,children:Object(u.jsx)(p.a,{className:""===c?b.disableButton:"".concat(b.actionButtonStyle," ").concat(b.positiveButton),disabled:""===c,children:Object(u.jsx)(D.a,{filename:c,className:""===c?b.disabledDownloadLinkStyle:b.downloadLinkStyle,data:t,children:"Save"})})})]})})]})},K=Object(l.a)({noMaxWidth:{maxWidth:"none",backgroundColor:"red"},noMaxWidthR:{maxWidth:"none",backgroundColor:"gray"},buttonNavigateStyle:{paddingRight:10,color:"red"},buttonNavigateStyleR:{paddingRight:10,color:"green"},logoTextStyle:{fontSize:45,fontWeight:"bold",userSelect:"none",fontFamily:"Indie Flower","&:hover":{cursor:"pointer"}},loadFileButton:{"&:after":{backgroundColor:"red"}},appBarStyle:{border:"solid 2px gray",borderRadius:"20px"},menuButtonStyle:{position:"absolute",right:"30px"},closeIconStyle:{position:"absolute",right:0,top:0}}),U=function(e){var t=e.setCounter,n=Object(m.useState)(!1),a=Object(g.a)(n,2),c=a[0],o=a[1],l=Object(m.useState)(!1),d=Object(g.a)(l,2),j=d[0],b=d[1],D=W((function(e){return e.ekgData.ekg})),R=W((function(e){return e.ekgData.navigateByR})),T=W((function(e){return e.ekgData.ekgDataInfo})),C=T.calculateSignsPTDone,w=T.calculateSignsQSDone,N=Object(i.f)(),Q=Object(z.useToasts)().addToast,M=Object(I.b)(),A=v.a.createRef(),G=K();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x.a,{className:G.appBarStyle,color:"inherit",position:"static",children:Object(u.jsxs)(h.a,{children:[Object(u.jsx)(r.a,{onClick:function(){N.push("/")},className:G.logoTextStyle,variant:"h4",children:"ECG Data Analyzer"}),Object(u.jsxs)(f.a,{className:G.menuButtonStyle,variant:"text",color:"inherit",children:[0===D.length?null:Object(u.jsx)(O.a,{arrow:!0,classes:{tooltip:R?G.noMaxWidthR:G.noMaxWidth},title:R?Object(u.jsx)(r.a,{variant:"h6",children:"Navigate by steps (default option)"}):Object(u.jsx)(r.a,{variant:"h6",children:"Make sure the R points are marked"}),children:Object(u.jsxs)(p.a,{className:R?G.buttonNavigateStyleR:G.buttonNavigateStyle,onClick:function(){t(1),M(P())},children:["Navigate by R (",R?"ON":"OFF",")"]})}),Object(u.jsx)(p.a,{disabled:0===D.length||0!==D.length&&w,className:G.loadFileButton,onClick:function(){M(F()),Q("Signs Q And S calculated successfully.",{appearance:"success",autoDismiss:!0})},children:"Try calculate signs (Q,S)"}),Object(u.jsx)(p.a,{disabled:!w||w&&C,className:G.loadFileButton,onClick:function(){M(E()),Q("Signs P and T calculated successfully.",{appearance:"success",autoDismiss:!0})},children:"Try calculate signs (P,T)"}),Object(u.jsx)(p.a,{className:G.loadFileButton,onClick:function(){return o(!0)},children:"Load from file"}),Object(u.jsx)(p.a,{onClick:function(){return b(!0)},disabled:0===D.length,children:"Save to file"}),Object(u.jsx)(p.a,{disabled:0===D.length,onClick:function(){M(B()),Q("File Removed.",{appearance:"error",autoDismiss:!0})},children:"Remove file"})]})]})}),Object(u.jsx)(J,{CSVFileModalOpen:j,setCSVFileModalOpen:b}),Object(u.jsxs)(S.a,{PaperProps:{style:{padding:18,border:"solid 2px grey",borderRadius:40,textAlign:"center"}},open:c,onClose:function(){return o(!1)},children:[Object(u.jsxs)(y.a,{disableTypography:!0,children:[Object(u.jsx)(s.a,{onClick:function(){return o(!1)},className:G.closeIconStyle,children:Object(u.jsx)(q.a,{})}),Object(u.jsx)(r.a,{variant:"h3",children:" Select file to read data"}),Object(u.jsx)(r.a,{variant:"inherit",children:"(*.csv data format: TimeStamp, ECG value, Sign)"})]}),Object(u.jsx)(k.a,{children:Object(u.jsx)(L,{childRef:A})})]})]})},X=n(99),Y=n.n(X),Z=n(196),$=n(197),_=n(198),ee=n(199),te=Object(l.a)({modalButtonStyle:{marginTop:"20px",marginBottom:"10px",width:100},editButtonStyle:{color:"white",background:"#4caf50","&:hover":{background:"#388e3c"}},modalContentStyle:{textAlign:"left"},quickSelectSignStyle:{marginTop:"20px",marginBottom:"15px"},quickOptionHints:{textAlign:"center",color:"gray"}}),ne=function(e){var t=e.openPointModal,n=e.setOpenPointModal,a=e.selectedPoint,c=e.setSelectedPoint,i=Object(z.useToasts)().addToast,o=te(),s=Object(I.b)(),l=function(e){s(Q({index:null===a||void 0===a?void 0:a.index,sign:e.value,oldSign:null===a||void 0===a?void 0:a.sign})),c({x:0,y:0,index:0,sign:""}),n(!1),""===e.value?i("Sign removed.",{appearance:"info",autoDismiss:!0}):i("Sign added: '".concat(e.value,"'."),{appearance:"info",autoDismiss:!0})};return Object(u.jsxs)(S.a,{onKeyPress:function(e){switch(e.key.toLowerCase()){case"t":l({value:"T"});break;case"p":l({value:"P"});break;case"q":l({value:"Q"});break;case"r":l({value:"R"});break;case"s":l({value:"S"});break;case"d":l({value:""})}},PaperProps:{style:{padding:10,border:"solid 2px grey",borderRadius:40,textAlign:"center"}},open:t,onClose:function(){c({x:0,y:0,index:0,sign:""}),n(!1)},children:[Object(u.jsx)(y.a,{disableTypography:!0,children:Object(u.jsx)(r.a,{variant:"h3",children:"Edit Point"})}),Object(u.jsx)(k.a,{children:Object(u.jsxs)(G.a,{className:o.modalContentStyle,container:!0,spacing:1,children:[Object(u.jsx)(G.a,{item:!0,xs:6,children:"Time stamp(UNIX):"}),Object(u.jsx)(G.a,{item:!0,xs:6,children:a&&a.x?a.x:""}),Object(u.jsx)(G.a,{item:!0,xs:6,children:"uV:"}),Object(u.jsx)(G.a,{item:!0,xs:6,children:a&&a.y?a.y:""}),Object(u.jsx)(G.a,{item:!0,xs:3,children:"Sign:"}),Object(u.jsx)(G.a,{item:!0,xs:3,children:a&&a.sign?a.sign:""}),Object(u.jsx)(G.a,{item:!0,xs:3,children:"Point index:"}),Object(u.jsx)(G.a,{item:!0,xs:3,children:a&&a.index?a.index:""}),Object(u.jsx)(G.a,{className:o.quickSelectSignStyle,item:!0,xs:12,children:Object(u.jsx)(f.a,{color:"primary",fullWidth:!0,children:[{label:"None",value:""},{label:"P",value:"P"},{label:"Q",value:"Q"},{label:"R",value:"R"},{label:"S",value:"S"},{label:"T",value:"T"}].map((function(e){return Object(u.jsx)(p.a,{disabled:""===e.value&&""===(null===a||void 0===a?void 0:a.sign),onClick:function(){return l(e)},children:e.label},e.label)}))})}),Object(u.jsx)(G.a,{className:o.quickOptionHints,item:!0,xs:12,children:Object(u.jsx)(r.a,{children:"Hint: You can use keyboard buttons to mark points. Press 'd' to delete."})})]})})]})};function ae(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var ce=Object(l.a)({buttonStyle:{"&:hover, &:focus":{background:"none"}}}),ie=function(e){var t=e.counter,n=e.setCounter,a=ce(),c=Object(m.useState)(!1),i=Object(g.a)(c,2),l=i[0],d=i[1],j=Object(m.useState)(),b=Object(g.a)(j,2),x=b[0],h=b[1],f=Object(I.c)((function(e){return e.ekgData.ekg})),O=Object(I.c)((function(e){return e.ekgData.signQuantity.R})),p=Object(I.c)((function(e){return e.ekgData.ekgDataInfo.RIndex})),S=Object(I.c)((function(e){return e.ekgData.navigateByR})),y=100,k=S?O:Math.ceil(f.length/y),v=function(){var e=Object(m.useState)(ae()),t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(m.useEffect)((function(){function e(){a(ae())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),D=v.height,R=v.width,T=Object(m.useState)([]),C=Object(g.a)(T,2),w=C[0],P=C[1],N=Object(m.useState)([]),B=Object(g.a)(N,2),Q=B[0],F=B[1],E=Object(m.useState)([]),M=Object(g.a)(E,2),z=M[0],A=M[1],L=Object(m.useState)([]),W=Object(g.a)(L,2),q=W[0],G=W[1];return Object(m.useEffect)((function(){if(f.length){var e;e=S?1===t?[0,p[t]]:[p[t-1],p[t+1]]:[0+y*(t-1),100+y*t];var n=[];P(f.slice(e[0],e[1]).map((function(e){return e[0]}))),F(f.slice(e[0],e[1]).map((function(e){return e[1]}))),A(f.slice(e[0],e[1]).map((function(e){return e[2]}))),f.slice(e[0],e[1]).forEach((function(e){e[2]&&n.push({x:e[0],y:e[1],xref:"x",yref:"y",text:e[2],showarrow:!0,arrowhead:3,ax:0,ay:"Q"===e[2]||"S"===e[2]?40:-40})})),G(n)}}),[f,t,p,S]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.a,{display:"flex",justifyContent:"center",children:f.length?Object(u.jsxs)(o.a,{display:"flex",alignItems:"center",children:[Object(u.jsx)(s.a,{disabled:1===t,onClick:function(){n(1)},className:a.buttonStyle,children:Object(u.jsx)(Z.a,{fontSize:"large"})}),Object(u.jsx)(s.a,{disabled:1===t,onClick:function(){n((function(e){return e-1}))},className:a.buttonStyle,children:Object(u.jsx)($.a,{fontSize:"large"})}),Object(u.jsx)(Y.a,{data:[{x:w,y:Q,text:z,type:"scatter",mode:"lines+markers",marker:{color:"red"}}],layout:{annotations:q,height:.75*D,width:.75*R,title:"ECG (".concat(t,"/").concat(k,")")},onClick:function(e){var n;d(!0),h({x:e.points[0].x,y:e.points[0].y,index:e.points[0].pointIndex+(1===t?0:S?p[t-1]:y*(t-1)),sign:null!==(n=e.points[0].text)&&void 0!==n?n:""})}}),Object(u.jsx)(s.a,{disabled:t===k,onClick:function(){n((function(e){return e+1}))},className:a.buttonStyle,children:Object(u.jsx)(_.a,{fontSize:"large"})}),Object(u.jsx)(s.a,{disabled:t===k,onClick:function(){n(k)},className:a.buttonStyle,children:Object(u.jsx)(ee.a,{fontSize:"large"})})]}):Object(u.jsx)(r.a,{variant:"h2",children:"No data to show"})}),Object(u.jsx)(ne,{setSelectedPoint:h,openPointModal:l,setOpenPointModal:d,selectedPoint:x})]})},oe=n(200),re=n(201),se=n(202),le=n(203),de=n(204),ue=function(e,t){return{name:e,quantity:t}},je=function(){var e=W((function(e){return e.ekgData.signQuantity})),t=[ue("P",e.P),ue("Q",e.Q),ue("R",e.R),ue("S",e.S),ue("T",e.T)];return Object(u.jsxs)(o.a,{marginTop:3,borderRadius:20,width:"480px",border:"solid 2px grey",bgcolor:"background.paper",children:[Object(u.jsx)(o.a,{m:2,p:2,display:"flex",justifyContent:"center",children:Object(u.jsx)(r.a,{variant:"h5",children:"Number of occurrences of characters"})}),Object(u.jsx)(o.a,{paddingBottom:2,children:Object(u.jsxs)(oe.a,{size:"small",children:[Object(u.jsx)(re.a,{children:Object(u.jsxs)(se.a,{children:[Object(u.jsx)(le.a,{children:"Sign"}),Object(u.jsx)(le.a,{children:"Quantity"})]})}),Object(u.jsx)(de.a,{children:t.map((function(e){return Object(u.jsxs)(se.a,{children:[Object(u.jsx)(le.a,{component:"th",scope:"row",children:e.name}),Object(u.jsx)(le.a,{children:e.quantity})]},e.name)}))})]})})]})},be=function(){var e=W((function(e){return e.ekgData.loaded})),t=W((function(e){return e.ekgData.signQuantity.R})),n=Object(m.useState)(1),a=Object(g.a)(n,2),c=a[0],i=a[1];return Object(u.jsxs)(o.a,{tabIndex:0,onKeyDown:function(n){if(e)switch(n.key){case"ArrowLeft":n.preventDefault(),1!==c&&i((function(e){return e-1}));break;case"ArrowRight":n.preventDefault(),c<t&&i((function(e){return e+1}))}},m:1,p:1,children:[Object(u.jsx)(U,{setCounter:i}),Object(u.jsx)(o.a,{marginTop:2,borderRadius:20,padding:5,border:"solid 2px grey",bgcolor:"background.paper",children:Object(u.jsx)(ie,{counter:c,setCounter:i})}),e?Object(u.jsx)(je,{}):null]})},ge=function(){return Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/ECGDataAnalyzer",children:Object(u.jsx)(be,{})}),Object(u.jsx)(i.a,{path:"/",children:Object(u.jsx)(b,{})})]})},xe=n(20),he=n(79),fe=n(52),Oe=n(100),pe=Object(xe.b)({ekgData:M}),Se={version:1,key:"root",storage:Object(Oe.a)({name:"ECGSelector",storeName:"redux"})},ye=Object(he.a)(Se,pe),ke=Object(R.a)({reducer:ye,devTools:!1,middleware:[fe.a]}),me=Object(he.b)(ke),ve=n(48),De=n(102),Ie=document.getElementById("root");c.a.render(Object(u.jsx)(I.a,{store:ke,children:Object(u.jsx)(De.a,{loading:null,persistor:me,children:Object(u.jsx)(ve.a,{children:Object(u.jsx)(z.ToastProvider,{children:Object(u.jsx)(ge,{})})})})}),Ie)}},[[153,1,2]]]);
//# sourceMappingURL=main.611033e1.chunk.js.map